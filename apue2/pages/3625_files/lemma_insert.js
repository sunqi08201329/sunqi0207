baidu.more.ns("rs");rs.apply=function(C,A,_){if(_){rs.apply(C,_);}if(C&&A&&typeof A=="object"){for(var B in A){C[B]=A[B];}}return C;};rs.alert=function(A,D){var B="\u786e\u5b9a";if(D&&D.okText){B=D.okText;}var C={buttons:{accept:{content:B,onclick:function(){var A=this,_=A.getParent();_.dispatchEvent("onaccept")&&_.close();}}},titleText:"\u63d0\u793a",width:300},_='<div class="rs-info">'+A+"</div>";rs.apply(C,D);bk.Dialog.alert(_,C);};rs.confirm=function(A,C){var B={buttons:{accept:{content:C.btnName||"\u786e\u5b9a",onclick:function(){var A=this,_=A.getParent();_.dispatchEvent("onaccept")&&_.close();}},cancel:{content:"\u53d6\u6d88",onclick:function(){var A=this,_=A.getParent();_.dispatchEvent("oncancel")&&_.close();}}},autoDispose:false,titleText:"\u786e\u8ba4",autoRender:true};if(baidu.isString(A)){B.contentText=A;}else{B.content=A;}rs.apply(B,C);var _=new bk.Dialog(B);_.open();return _;};rs.trim=function(_){if(typeof(_)=="object"){if(typeof(_.length)=="number"){baidu.each(_,function(A,B){_[B]=rs.trim(_[B]);});}else{for(var A in _){_[A]=rs.trim(_[A]);}}}else{_=baidu.string.trim(_);}return _;};rs.hover=function(A,_){if(baidu.lang.isArray(A)){baidu.each(A,function(A){rs.hover(A,_);});}else{baidu.on(A,"mouseout",function(){baidu.dom.removeClass(A,_);});baidu.on(A,"mouseover",function(){baidu.dom.addClass(A,_);});}};baidu.dom.radioClass=function(A,_){baidu.each(A.parentNode.childNodes,function(A){if(A.nodeType==1){baidu.dom.removeClass(A,_);}});baidu.dom.addClass(A,_);};String.prototype.subText=function(A,_){if(!_){_="...";}if(this.length>A){return this.substr(0,A)+_;}else{return this;}};baidu.dom.ready(function(){if(baidu.ui&&baidu.ui.tree){baidu.ui.tree.Tree.options={draggable:false};}});rs.subByte=function(A,B,_){if(baidu.string.getByteLength(A)>B){return baidu.string.subByte(A,B)+(_||"...");}return A;};var JSON=window.JSON||baidu.json;rs.log=function(_){alert("\u8981\u6253\u5370\u7684\u4fe1\u606f\u5982\u4e0b\n"+JSON.stringify(_));};baidumessage=function(){};bk.Dialog.prototype.tplContent="<div id='#{id}' class='#{class}' style='overflow:auto; position:relative'><div class='#{class}-shade'></div><span class='dialog-content-inner'>#{content}</span></div>";baidu.more.ns("rs");rs.Request=function(_){this.method=_;this.url=null;this.args=null;};rs.Request.prototype={post:function(){var _=this;this.url="/guanxi/api/"+this.method+"?token="+(new Date()).getTime();this.args=this.args?("args="+encodeURIComponent(baidu.json.stringify(this.args))):"args=[]";baidu.ajax.post(this.url,this.args,function(B,C){var A=baidu.json.parse(C);if(A.error_code==-2){alert("\u4f60\u6ca1\u6709\u767b\u5f55\uff0c\u6216\u8005\u6ca1\u6709\u76f8\u5e94\u7684\u6743\u9650\uff01");window.location="/guanxi/admin/login";}if(A.error_code==-3){alert("\u4f60\u6ca1\u6709\u767b\u5f55,\u8bf7\u767b\u5f55\u540e\u518d\u64cd\u4f5c\uff01");userlogin.check(function(){if(_.callback){_.callback(A);}});return;}if(A.error_code==null){alert("\u6570\u636e\u9519\u8bef,\u8bf7\u8054\u7cfbRD!\nerror_code : null");return;}if(_.callback){_.callback(A);}});},request:function(){var _=this;this.url="/guanxi/"+this.method+"";this.args=this.args?("args="+encodeURIComponent(baidu.json.stringify(this.args))):"args=[]";baidu.ajax.request(this.url,{method:"get",data:this.args,onsuccess:function(B,C){var A=baidu.json.parse(C);if(A.error_code==-2){alert("\u4f60\u6ca1\u6709\u767b\u5f55\uff0c\u6216\u8005\u6ca1\u6709\u76f8\u5e94\u7684\u6743\u9650\uff01");window.location="/guanxi/admin/login";}if(A.error_code==-3){alert("\u4f60\u6ca1\u6709\u767b\u5f55,\u8bf7\u767b\u5f55\u540e\u518d\u64cd\u4f5c\uff01");userlogin.check(function(){if(_.callback){_.callback(A);}});return;}if(A.error_code==null){alert("\u6570\u636e\u9519\u8bef,\u8bf7\u8054\u7cfbRD!\nerror_code : null");return;}if(_.callback){_.callback(A);}}});}};var lemmars={buildHTML:function(B,_,D){var C="";for(var E=0;E<B.length;E++){var A=B[E];C+='<div style="display:none" id="rs-'+_+"-"+(A.fcategoryId||A.fentryTableId)+'">'+'\t<div id="rs'+A.fentryTableId+'" class="lemma-relation-table clearfix '+(D?" lemma-relation-top ":"")+(A.isExpand==0?"lemma-relation-table-close":"")+'">'+'\t\t<div class="relation-table-banner relation-banner-'+_+'" id="table-banner-'+_+"-"+(A.fcategoryId||A.fentryTableId)+'">'+'\t\t\t<span class="relation-table-view-control">'+'\t\t\t\t<a id = "relation-title-edit-'+_+"-"+(A.fcategoryId||A.fentryTableId)+'"  class="title-edit nslog:'+(D?"2131":"2141")+' " target="_blank" href="/guanxi/view/'+encodeURIComponent(A.entryTitle)+"/"+A.entryId+"?e=1#"+A.templateId+'" hidefocus="true"></a>'+'\t\t\t\t<a class="title-folder nslog:'+(D?"2132":"2142")+'" href="javascript:void(0)"  hidefocus="true" title="\u6536\u8d77"></a>'+"\t\t\t</span>"+'\t\t\t<h3 class="relation-table-title">'+'\t\t\t\t<a id="relation-title-'+_+"-"+(A.fcategoryId||A.fentryTableId)+'" class="table-title nslog:'+(D?"2133":"2143")+'" href="/guanxi/view/'+encodeURIComponent(A.entryTitle)+"/"+A.entryId+"#"+A.templateId+'" target="_blank" hidefocus="true"></a>'+"\t\t\t</h3>"+"\t\t</div>"+'\t\t<div class="relation-table-main nslog-area"  data-nslog-type="'+(D?"2134":"2144")+'" id="relation-table-main-'+_+"-"+(A.fcategoryId||A.fentryTableId)+'"></div>\t'+"\t</div>"+"</div>";}return C;},relationInsert:function(_,B){if(!B){return;}nslog.set("rs-relation","1");B.foot=B.foot||[];B.top=B.top||[];allData=B.foot.concat(B.top);if(B.foot.length){nslog.set("rs-relation-foot","1");baidu.g("rs-foot-"+_).innerHTML=this.buildHTML(B.foot,_);}if(B.top.length){nslog.set("rs-relation-top","1");var A=baidu.g("place-"+_).parentNode,C=baidu.dom.query('div[id^="catalog"]',A)[0]||baidu.dom.query('.lemma-main-content[id^="lemmaContent"]',A)[0];baidu.insertHTML(C,"beforeBegin",'<a name="rs-1" id="rs-1" oid="'+B.top[0].fentryTableId+'"></a><div  oid="'+B.top[0].fentryTableId+'">'+this.buildHTML(B.top,_,true)+"</div>");}baidu.each(allData,function(B){var C=baidu.g("table-banner-"+_+"-"+(B.fcategoryId||B.fentryTableId)),A=baidu.dom.query(".title-folder",C)[0];baidu.on(A,"click",function(_){if(baidu.dom.hasClass(A,"title-folder")){baidu.dom.toggleClass(A,"title-folder-close");}var B=baidu.event.getTarget(_);lemmars.lemmaRelationAction(C,A);baidu.event.preventDefault(_);return false;});});if(typeof(buildRelationTable)=="undefined"){baidu.sio.callByBrowser("/guanxi/static/js/template_render_lemma.js",function(){baidu.each(B.top,function(A){lemmars.showRelation(_,A,true);});baidu.each(B.foot,function(A){lemmars.showRelation(_,A);});},{charset:"utf-8"});}else{baidu.each(B.top,function(A){lemmars.showRelation(_,A,true);});baidu.each(B.foot,function(A){lemmars.showRelation(_,A);});}},lemmaRelationAction:function(_,A){var B=baidu.dom.next(_);if(baidu.dom.hasClass(A,"title-folder-close")){baidu.dom.addClass(_,"border-close");baidu.dom.setStyle(B,"display","none");A.title="\u5c55\u5f00";}else{baidu.dom.removeClass(_,"border-close");baidu.dom.setStyle(B,"display","");A.title="\u6536\u8d77";}return false;},showRelation:function(B,C,E){var D=parseInt(baikeViewInfo.id),G=B,H=C.entryId,_=C.templateId,F=C.fentryTableId,A=new rs.Request("jsondata?action=getViewLemmaData");A.callback=function(A){if(A.error_code==0){if(A.selectedTable.topicId){baidu.show("rs-"+B+"-"+C.fentryTableId);var H="rs-topic-buffer-"+G+"-"+A.selectedTable.topicId,Q="<div class='rs-topic-buffer' id='"+H+"'></div>";baidu.dom.insertHTML(baidu.dom.query("body")[0],"beforeEnd",Q);var R=new rs.Topic({isExpand:C.isExpand,lemmaId:D,subLemmaId:B,container:H,data:A.selectedTable},function(A){var E=baidu.dom.q("item-wp",H);for(var D=0,B=E.length;D<B;D++){if(baidu.dom.hasClass(baidu.dom.q("item-wp")[D],"beInLemma")){baidu.dom.addClass(baidu.dom.getParent(baidu.dom.q("item-wp")[D]),"beInLemma");baidu.dom.removeClass(baidu.dom.q("item-wp")[D],"beInLemma");}}var _=baidu.dom.query(".title-folder",baidu.dom.g(H))[0];baidu.on(_,"click",function(C){var E=baidu.event.getTarget(C),B=baidu.dom.query(".tab-div",baidu.dom.g(H))[0],G=baidu.dom.query(".head",baidu.dom.g(H))[0],D=baidu.dom.query(".bottom-border",baidu.dom.g(H))[0];if(baidu.dom.hasClass(E,"title-folder")){baidu.dom.toggleClass(E,"title-folder-close");var F=baidu.dom.prev(E),_=baidu.dom.next(E.parentNode.parentNode);if(baidu.dom.hasClass(E,"title-folder-close")){E.title="\u5c55\u5f00";baidu.fx.collapse(_,{duration:200,onafterfinish:function(){B.style.display="none";baidu.dom.addClass(G,"border-close");baidu.dom.addClass(D,"bottom-border-close");A.changeTitle(1);}});}else{E.title="\u6536\u8d77";baidu.fx.expand(_,{duration:200,onafterfinish:function(){A.changeTitle(0);baidu.dom.removeClass(G,"border-close");baidu.dom.removeClass(D,"bottom-border-close");B.style.display="";}});}}baidu.event.preventDefault(C);return false;});var C=baidu.dom.query(".icon-slide",baidu.dom.g(H))[0];baidu.on(C,"click",function(A){var B=baidu.event.getTarget(A),D=baidu.dom.q("menu-slide",baidu.dom.g(H))[0],_=baidu.dom.query(".bd",baidu.dom.g(H))[0];baidu.dom.toggleClass(B,"icon-slide-close");var C=baidu.dom.query(".main",_)[0];if(baidu.dom.hasClass(B,"icon-slide")){if(baidu.dom.hasClass(B,"icon-slide-close")){baidu.fx.collapse(baidu.dom.query(".menu",baidu.dom.g(H))[0],{orientation:"horizontal",duration:300,onbeforestart:function(){baidu.fx.fadeOut(C);},onafterfinish:function(){baidu.dom.addClass(_,"mode-full");baidu.fx.fadeIn(C);var A=baidu.dom.query(".scrollPanel",_)[0];baidu.dom.query(".main",_)[0].innerHTML='<div  class="scrollPanel" style="width:642px">'+A.innerHTML;+'</div><div  class="top-mask"></div>';A=baidu.dom.query(".scrollPanel",_)[0];R.initScrollPanel(A);R.addInfoListHover();}});}else{baidu.fx.expand(baidu.dom.query(".menu",baidu.dom.g(H))[0],{orientation:"horizontal",duration:300,onbeforestart:function(){baidu.fx.fadeOut(C);baidu.dom.removeClass(_,"mode-full");},onafterfinish:function(){baidu.fx.fadeIn(C);var A=baidu.dom.query(".scrollPanel",_)[0];baidu.dom.query(".main",_)[0].innerHTML='<div  class="scrollPanel" style="width:534px;_width:530px">'+A.innerHTML;+'</div><div  class="top-mask"></div>';A=baidu.dom.query(".scrollPanel",_)[0];R.initScrollPanel(A);R.addInfoListHover();}});}}baidu.event.preventDefault(A);return false;});});baidu.dom.g("rs-"+B+"-"+C.fentryTableId).innerHTML="";baidu.dom.removeClass(H,"rs-topic-buffer");baidu.dom.g("rs-"+B+"-"+C.fentryTableId).appendChild(baidu.dom.g(H));R.initScroll();R.changeTitle(1);if(C.isExpand==0){R.changeTitle(1);var S=baidu.dom.query(".head",baidu.dom.g(H))[0],O=baidu.dom.query(".bd",baidu.dom.g(H))[0],_=baidu.dom.query(".topic-ops",baidu.dom.g(H))[0],I=baidu.dom.query(".title-folder",baidu.dom.g(H))[0],N=baidu.dom.query(".bottom-border",baidu.dom.g(H))[0];baidu.dom.addClass(S,"border-close");baidu.dom.addClass(N,"bottom-border-close");I.title="\u5c55\u5f00";baidu.dom.addClass(I,"title-folder-close");O.style.display="none";}if(!rs.Topic.HasSetLog){nslog(location.href,3711);rs.Topic.HasSetLog=true;}}else{var P=0,T=A.selectedTable.data.list;for(var M=0;M<T.length;M++){for(var K=0;K<T[M].length;K++){if(T[M][K].otype=="4"){P++;}if(P>1){T[M][K].isHidden=1;}}}A.isTop=E;if(A.selectedTable.isMergeTable){var L=buildRelationTable({selectedTable:A.selectedTable,isTop:E});baidu.g("relation-table-main-"+B+"-"+F).innerHTML=L;baidu.g("relation-title-"+B+"-"+F).innerHTML=baidu.string.encodeHTML(A.selectedTable.tableTitle)||"";var J=baidu.g("relation-title-"+B+"-"+F);J.parentNode.innerHTML=J.innerHTML;baidu.hide("relation-title-edit-"+B+"-"+F);baidu.show(baidu.g("relation-table-main-"+B+"-"+F).parentNode.parentNode);return;}if(A.selectedTable.data&&A.selectedTable.data.pageData){buildRelationTable(A,"relation-table-main-"+B+"-"+F);baidu.g("relation-title-"+B+"-"+F).innerHTML=baidu.string.encodeHTML(A.selectedTable.tableName)||"";baidu.show(baidu.g("relation-table-main-"+B+"-"+F).parentNode.parentNode);}baidu.dom.ready(function(){var _=baidu.dom.q("old-hide");baidu.object.each(_,function(_,A){if(_){baidu.dom.setStyle(_.parentNode.parentNode.parentNode,"display","none");}});});}}else{baidu.g("relation-table-main-"+B+"-"+F).parentNode.parentNode.style.display="none";}};A.args=[0,8,{fentryTableId:F,lemmaId:D,subLemmaId:B}];A.request();}};baidu.on(document,"click",function(A){var B=baidu.event.getTarget(A);if(baidu.dom.hasClass(B,"title-folder")){if(baidu.dom.hasClass(B.parentNode.parentNode,"title-banner hd  relation-unit")){baidu.dom.toggleClass(B,"title-folder-close");B.title=B.title=="\u6536\u8d77"?"\u5c55\u5f00":"\u6536\u8d77";var _=baidu.dom.next(B.parentNode.parentNode);while(_!=null&&(_.tagName.toLowerCase()=="table"||_.tagName.toLowerCase()=="div")){baidu.dom.toggleClass(_,"rs-hidden");_=baidu.dom.next(_);}}baidu.event.preventDefault(A);return false;}});if(typeof rsInsertData!="undefined"&&baidu.lang.isArray(rsInsertData)){baidu.each(rsInsertData,function(_){lemmars.relationInsert(_[0],_[1]);});}baidu.ui.Slider=baidu.ui.createUI(function(A){var _=this;_.range=_.range||[_.min,_.max];}).extend({layout:"horizontal",uiType:"slider",tplBody:'<div id="#{id}" class="#{class}" onmousedown="#{mousedown}" style="position:relative;">#{thumb}</div>',tplThumb:'<div id="#{thumbId}" class="#{thumbClass}" style="position:absolute;"></div>',value:0,min:0,max:100,disabled:false,_dragOpt:{},_axis:{horizontal:{mousePos:"x",pos:"left",size:"width",clientSize:"clientWidth",offsetSize:"offsetWidth"},vertical:{mousePos:"y",pos:"top",size:"height",clientSize:"clientHeight",offsetSize:"offsetHeight"}},getString:function(){var _=this;return baidu.format(_.tplBody,{id:_.getId(),"class":_.getClass(),mousedown:_.getCallRef()+"._mouseDown(event)",thumb:baidu.format(_.tplThumb,{thumbId:_.getId("thumb"),thumbClass:_.getClass("thumb")})});},_mouseDown:function(A){var D=this,_=D._axis[D.layout],F=baidu.page.getMousePosition(),C=baidu.dom.getPosition(D.getBody()),E=D.getThumb(),B=baidu.event.getTarget(A);if(B==E||baidu.dom.contains(E,B)||D.disabled){return;}D._calcValue(F[_.mousePos]-C[_.pos]-E[_.offsetSize]/2);D.update();D.dispatchEvent("slideclick");},render:function(_){var A=this;if(!_){return;}baidu.dom.insertHTML(A.renderMain(_),"beforeEnd",A.getString());A._createThumb();A.update();A.dispatchEvent("onload");},_createThumb:function(){var A=this,_;A._dragOpt={ondragend:function(){A.dispatchEvent("slidestop");},ondragstart:function(){A.dispatchEvent("slidestart");},ondrag:function(){var _=A._axis[A.layout],B=A.getThumb().style[_.pos];A._calcValue(parseInt(B));A.dispatchEvent("slide");},range:[0,0,0,0]};A._updateDragRange();_=baidu.dom.draggable(A.getThumb(),A._dragOpt);A.addEventListener("dispose",function(){_.cancel();});},_updateDragRange:function(A){var D=this,_=D._axis[D.layout],B=A||D.range,C=D._dragOpt.range,E=D.getThumb();B=[Math.max(Math.min(B[0],D.max),D.min),Math.max(Math.min(B[1],D.max),D.min)];if(D.layout.toLowerCase()=="horizontal"){C[1]=D._parseValue(B[1],"fix")+E[_.offsetSize];C[3]=D._parseValue(B[0],"fix");C[2]=E.clientHeight;}else{C[0]=D._parseValue(B[0],"fix");C[2]=D._parseValue(B[1],"fix")+E[_.offsetSize];C[1]=E.clientWidth;}},update:function(C){var B=this,_=B._axis[B.layout],A=B.getBody();C=C||{};baidu.object.extend(B,C);B._updateDragRange();B._adjustValue();if(B.dispatchEvent("beforesliderto",{drop:C.drop})){B.getThumb().style[_.pos]=B._parseValue(B.value,"pix")+"px";B.dispatchEvent("update");}},_adjustValue:function(){var A=this,_=A.range;A.value=Math.max(Math.min(A.value,_[1]),_[0]);},_calcValue:function(A){var _=this;_.value=_._parseValue(A,"value");_._adjustValue();},_parseValue:function(A,C){var B=this,_=B._axis[B.layout];len=B.getBody()[_.clientSize]-B.getThumb()[_.offsetSize];if(C=="value"){A=(B.max-B.min)/len*A+B.min;}else{A=Math.round(len/(B.max-B.min)*(A-B.min));}return A;},getValue:function(){return this.value;},getTarget:function(){return baidu.g(this.targetId);},getThumb:function(){return baidu.g(this.getId("thumb"));},disable:function(){var _=this;_.disabled=true;_._updateDragRange([_.value,_.value]);},enable:function(){var _=this;_.disabled=false;_._updateDragRange(_.range);},dispose:function(){var _=this;_.dispatchEvent("dispose");baidu.dom.remove(_.getId());_.dispatchEvent("ondispose");baidu.lang.Class.prototype.dispose.call(_);}});baidu.ui.ScrollBar=baidu.ui.createUI(function(A){var _=this;_._scrollBarSize={width:0,height:0};}).extend({uiType:"scrollbar",tplDOM:'<div id="#{id}" class="#{class}"></div>',tplThumb:'<div class="#{prev}"></div><div class="#{track}"></div><div class="#{next}"></div>',value:0,dimension:10,orientation:"vertical",step:5,_axis:{horizontal:{size:"width",unSize:"height",offsetSize:"offsetWidth",unOffsetSize:"offsetHeight",clientSize:"clientWidth",scrollPos:"scrollLeft",scrollSize:"scrollWidth"},vertical:{size:"height",unSize:"width",offsetSize:"offsetHeight",unOffsetSize:"offsetWidth",clientSize:"clientHeight",scrollPos:"scrollTop",scrollSize:"scrollHeight"}},getThumbString:function(){var _=this;return baidu.string.format(_.tplThumb,{prev:_.getClass("thumb-prev"),track:_.getClass("thumb-track"),next:_.getClass("thumb-next")});},render:function(_){var A=this;if(!_||A.getMain()){return;}baidu.dom.insertHTML(A.renderMain(_),"beforeEnd",baidu.string.format(A.tplDOM,{id:A.getId(),"class":A.getClass()}));A._renderUI();A.dispatchEvent("load");},_renderUI:function(){var D=this,A=D._axis[D.orientation],B=D.getBody(),G,_,C;function F(_){return{classPrefix:D.classPrefix+"-"+_,skin:D.skin?D.skin+"-"+_:"",poll:{time:4},onmousedown:function(){D._basicScroll(_);},element:B,autoRender:true};}G=D._prev=new baidu.ui.Button(F("prev"));baidu.dom.insertHTML(B,"beforeEnd",baidu.string.format(D.tplDOM,{id:D.getId("track"),"class":D.getClass("track")}));C=D._next=new baidu.ui.Button(F("next"));function E(_){D.dispatchEvent("scroll",{value:Math.round(_.target.getValue())});}_=D._slider=new baidu.ui.Slider({classPrefix:D.classPrefix+"-slider",skin:D.skin?D.skin+"-slider":"",layout:D.orientation,onslide:E,onslideclick:E,element:baidu.dom.g(D.getId("track")),autoRender:true});D._scrollBarSize[A.unSize]=C.getBody()[A.unOffsetSize];D._thumbButton=new baidu.ui.Button({classPrefix:D.classPrefix+"-thumb-btn",skin:D.skin?D.skin+"-thumb-btn":"",content:D.getThumbString(),capture:true,element:_.getThumb(),autoRender:true});D.flushUI(D.value,D.dimension);D._registMouseWheelEvt(D.getMain());},flushUI:function(E,D){var F=this,B=F._axis[F.orientation],G=F._prev.getBody()[B.offsetSize]+F._next.getBody()[B.offsetSize],C=F.getBody(),A=F._slider,H=A.getThumb(),_;baidu.dom.hide(C);_=F.getMain()[B.clientSize];F._scrollBarSize[B.size]=(_<=0)?G:_;A.getMain().style[B.size]=(_<=0?0:_-G)+"px";H.style[B.size]=Math.max(Math.min(D,100),0)+"%";baidu.dom.show(C);F._scrollTo(E);},_scrollTo:function(_){this._slider.update({value:_});},scrollTo:function(_){var A=this;A._scrollTo(_);A.dispatchEvent("scroll",{value:_});},_basicScroll:function(A){var _=this;_.scrollTo(Math.round(_._slider.getValue())+(A=="prev"?-_.step:_.step));},_onMouseWheelHandler:function(A){var C=this,B=C.target,A=A||window.event,_=A.detail||-A.wheelDelta;baidu.event.preventDefault(A);C._basicScroll(_>0?"next":"prev");},_registMouseWheelEvt:function(A){var B=this,C=function(){var A=navigator.userAgent.toLowerCase(),_=/(webkit)/.exec(A)||/(opera)/.exec(A)||/(msie)/.exec(A)||A.indexOf("compatible")<0&&/(mozilla)/.exec(A)||[];return _[1]=="mozilla"?"DOMMouseScroll":"mousewheel";},_={target:A,evtName:C(),handler:baidu.fn.bind("_onMouseWheelHandler",B)};baidu.event.on(_.target,_.evtName,_.handler);B.addEventListener("dispose",function(){baidu.event.un(_.target,_.evtName,_.handler);});},setVisible:function(_){this.getMain().style.display=_?"":"none";},isVisible:function(){return this.getMain().style.display!="none";},getSize:function(){return this._scrollBarSize;},update:function(A){var _=this;_.dispatchEvent("beforeupdate");baidu.object.extend(_,A);_.flushUI(_.value,_.dimension);_.dispatchEvent("update");},dispose:function(){var _=this;_.dispatchEvent("dispose");_._prev.dispose();_._thumbButton.dispose();_._slider.dispose();_._next.dispose();baidu.dom.remove(_.getMain());baidu.lang.Class.prototype.dispose.call(_);}});baidu.ui.ScrollBar.register(function(_){if(!_.container){return;}_.addEventListeners({load:function(){_.update();if(_.orientation=="vertical"){_._registMouseWheelEvt(_.getContainer());}},beforeupdate:function(){var _=this;axis=_._axis[_.orientation],container=_.getContainer();if(!container){return;}_.dimension=Math.round(container[axis.clientSize]/container[axis.scrollSize]*100);_.value=container[axis.scrollSize]-container[axis.clientSize];_.value>0&&(_.value=Math.round(container[axis.scrollPos]/(container[axis.scrollSize]-container[axis.clientSize])*100));},scroll:function(C){var B=_.getContainer(),A=_._axis[_.orientation];B[A.scrollPos]=C.value/100*(B[A.scrollSize]-B[A.clientSize]);}});});baidu.object.extend(baidu.ui.ScrollBar.prototype,{getContainer:function(){return baidu.dom.g(this.container);}});baidu.ui.ScrollPanel=baidu.ui.createUI(function(_){}).extend({uiType:"scrollpanel",tplDOM:'<div id="#{id}" class="#{class}">#{body}</div>',overflow:"auto",_scrollBarSize:0,_yVisible:false,_xVisible:false,_axis:{y:{size:"height",unSize:"width",unScrollSize:"scrollWidth",unClientSize:"clientWidth",offsetSize:"offsetHeight"},x:{size:"width",unSize:"height",unScrollSize:"scrollHeight",unClientSize:"clientHeight",offsetSize:"offsetWidth"}},getString:function(){var A=this,_=baidu.string.format(A.tplDOM,{id:A.getId("panel"),"class":A.getClass("panel")});_=baidu.string.format(A.tplDOM,{id:A.getId(),"class":A.getClass(),body:_});return baidu.string.format(A.tplDOM,{id:A.getId("main"),"class":A.getClass("main"),body:_});},render:function(_){var A=this;A.target=_;if(!_||A.getMain()){return;}baidu.dom.insertHTML(A.getTarget(),"afterEnd",A.getString());A.renderMain(A.getId("main"));A._renderUI();},_renderUI:function(){var B=this,E=B.getMain(),_=B.getPanel(),A=B.getTarget(),D=B.skin||"";E.style.width=A.offsetWidth+"px";E.style.height=A.offsetHeight+"px";_.appendChild(A);function C(F){var C=B.getId("overflow-"+F),A=B._axis[F],_=B.getPanel(),E;baidu.dom.insertHTML(_,(F=="y"?"afterEnd":"beforeEnd"),baidu.string.format(B.tplDOM,{id:C,"class":B.getClass("overflow-"+F)}));C=baidu.dom.g(C);if("y"==F){baidu.dom.setStyle(_,"float","left");baidu.dom.setStyle(C,"float","left");}B["_"+F+"Visible"]=true;E=B["_"+F+"Scrollbar"]=new baidu.ui.ScrollBar({skin:D+"scrollbar"+"-"+F,orientation:F=="y"?"vertical":"horizontal",container:B.container,element:C,autoRender:true});C.style[A.unSize]=E.getSize()[A.unSize]+"px";B._scrollBarSize=E.getSize()[A.unSize];E.setVisible(false);}if(B.overflow=="overflow-y"||B.overflow=="auto"){C("y");}if(B.overflow=="overflow-x"||B.overflow=="auto"){C("x");}B._smartVisible();},_smartVisible:function(){var A=this,D={yshow:false,xshow:false};if(!A.getContainer()){return;}function B(B){var _=A._axis[B],D=A["_"+B+"Scrollbar"],C=A.getContainer(),E={};if(!D||!D.isVisible()){C.style[_.unSize]=C[_.unClientSize]-A._scrollBarSize+"px";}E[_.unSize]=C[_.unClientSize];E["scroll"+_.unSize]=C[_.unScrollSize];return E;}function _(B,D){var _=A._axis[B],C=A.getContainer();if(!A["_"+B+"Visible"]||!D[B+"show"]||!A["_"+B+"Scrollbar"]){C.style[_.unSize]=C[_.unClientSize]+A._scrollBarSize+"px";}}function C(B,F){var _=A._axis[B],D=A.getContainer(),C=A["_"+B+"Scrollbar"],E=F[B+"show"];if(C){C.getMain().style[_.size]=D[_.offsetSize]+"px";C.setVisible(A["_"+B+"Visible"]?E:false);C.update();}}baidu.object.extend(D,B("y"));baidu.object.extend(D,B("x"));if(D.scrollwidth<=D.width+A._scrollBarSize&&D.scrollheight<=D.height+A._scrollBarSize){D.yshow=D.xshow=false;}else{if(D.scrollwidth<=D.width&&D.scrollheight>D.height+A._scrollBarSize){D.yshow=true;D.xshow=false;}else{if(D.scrollwidth>D.width+A._scrollBarSize&&D.scrollheight<=D.height){D.yshow=false;D.xshow=true;}else{D.yshow=D.xshow=true;}}}_("y",D);_("x",D);C("y",D);C("x",D);},setVisible:function(_,B){var A=this;if(B){A["_"+B+"Visible"]=_;}else{A._yVisible=A._xVisible=_;}A._smartVisible();},isVisible:function(A){var _=this;return _["_"+A+"Visible"];},getScrollBar:function(B){var _=this,A=B?_["_"+B+"Scrollbar"]:null;if(!A){A=(_._yScrollbar&&_._xScrollbar)?[_._yScrollbar,_._xScrollbar]:(_._yScrollbar||_._xScrollbar);}return A;},update:function(A){var _=this;baidu.object.extend(_,A);_._smartVisible();},getPanel:function(){return baidu.dom.g(this.getId("panel"));},getTarget:function(){return baidu.dom.g(this.target);},getContainer:function(){return baidu.dom.g(this.container);},dispose:function(){var A=this,_=A._yScrollbar,B=A._xScrollbar;A.dispatchEvent("dispose");A.getMain().parentNode.appendChild(A.getTarget());if(_){_.dispose();}if(B){B.dispose();}baidu.dom.remove(A.getMain());baidu.lang.Class.prototype.dispose.call(A);}});baidu.ui.Tree=baidu.ui.createUI(function(_){this._treeNodes={};});baidu.ui.Tree.TreeNode=function(A){var _=this;baidu.object.extend(_,A);_.id=_.id||baidu.lang.guid();_.childNodes=[];_._children=[];window.$BAIDU$._instances[_.id]=_;_._tree={};_._stringArray=[];};baidu.ui.Tree.TreeNode.prototype={uiType:"tree-node",text:"",type:"leaf",isToggle:true,_getId:function(_){return this.id+"-"+_;},_getClass:function(B){var A=this,_="tangram-tree-node-"+B;if(A.skin){_+=" "+A.skin+"-"+B;}return _;},_getCallRef:function(){return"window['$BAIDU$']._instances['"+this.id+"']";},getString:function(){var B=this,A=B._stringArray,_="",C=B.highLight==1?"highLight":"";A.push('<dl class="'+C+'" id="',B.id,'">');B._createBodyStringArray();_=B.isExpand?"display:''":"display:none";A.push('<dd  style="'+_+'" id="',B.id,'-subNodeId"></dd></dl>');return A.join("");},getParentNode:function(){return this.parentNode;},setParentNode:function(_){var A=this;A.parentNode=_;A._level=_._level+1;},getChildNodes:function(){return this.childNodes;},setTree:function(_){var A=this;A._tree=_;A._tree._treeNodes[A.id]=A;},getTree:function(){return this._tree;},appendData:function(A){var _=this;baidu.dom.insertHTML(_._getSubNodesContainer(),"beforeEnd",_._getSubNodeString(A));_._isRenderChildren=true;},_getSubNodeString:function(F){var D=this,_,E,C=[],B=0,A,E=F.length;for(;B<E;B++){A=F[B];_=new baidu.ui.Tree.TreeNode(A);if(B==(E-1)){_._isLast=true;}D._appendChildData(_,E-1);C.push(_.getString());}return C.join("");},isParent:function(_){var B=this,A=_;while(!A.isRoot&&(A=A.getParentNode())){if(A==B){return true;}}return false;},appendTo:function(_){var A=this;A.getParentNode()._removeChildData(A);_.appendChild(A);A.dispatchEvent("appendto");},moveTo:function(B){var C=this,_=C.getParentNode(),D,A;if(_==null){return false;}if(B.isExpand&&B.getChildNodes().length>0){D=B;}else{D=B.getParentNode();}_._removeChildData(C);A=(D==B)?-1:B.getIndex();D.appendChild(C,A);C.dispatchEvent("moveto");},_appendChildData:function(B,_,C){var D=this,A=D.getChildNodes();B.parentNode=D;B.setTree(D.getTree());if(C){A.splice(_+1,0,B);D._children.splice(_+1,0,B.json);}else{A.push(B);D._children.push(B.json);}},appendChild:function(D,B){var G=this,_,E,F,C=D._getContainer(),A=G._getSubNodesContainer();if(B==null){B=G.getChildNodes().length-1;}G._appendChildData(D,B,true);F=G.getChildNodes();_=D.getParentNode();E=D.getString();if(C){if(B==-1){if(F.length==1){A.appendChild(C);}else{baidu.dom.insertBefore(C,F[1]._getContainer());}}else{baidu.dom.insertAfter(C,F[B]._getContainer());}}else{if(B==-1){if(F.length==1){baidu.dom.insertHTML(A,"beforeEnd",E);}else{baidu.dom.insertHTML(F[1]._getContainer(),"beforeBegin",E);}}else{baidu.dom.insertHTML(F[B]._getContainer(),"afterEnd",E);}}D._updateAll();D._updateOldParent(_);if(G.type=="leaf"){G.type="trunk";G._getIconElement().className=G._getClass("trunk");}G._getSpanElement().innerHTML=G._getImagesString();return D;},_updateOldParent:function(_){var A=this;if(!_){return false;}if(_.getLastChild()){_.getLastChild()._update();}else{if(A.getTree().expandable){_._getIconElement().className=A._getClass("leaf");_.type="leaf";}_._update();}},_removeChildData:function(_,B){var A=this;baidu.array.remove(A._children,_.json);baidu.array.remove(A.childNodes,_);delete A.getTree().getTreeNodes()[_.id];if(B){while(_.childNodes[0]){_._removeChildData(_.childNodes[0]);}}},removeAllChildren:function(){var A=this,_=A.getChildNodes();while(_[0]){A.removeChild(_[0],true);}},removeChild:function(A){if(A.getParentNode()==null){return false;}var B=this,_=B.getChildNodes();B._removeChildData(A,true);delete B.getTree().getTreeNodes()[A.id];baidu.dom.remove(A._getContainer());B.getTree().setCurrentNode(null);if(_.length<=0&&!B.isRoot){B._getSubNodesContainer().style.display="none";if(B.getTree().expandable){B._getIconElement().className=B._getClass("leaf");B.type="leaf";}}B._updateAll();},_updateAll:function(){var A=this,_=A.getPrevious();_&&_._update();A._update();},_update:function(){var _=this;_._getSpanElement().innerHTML=_._getImagesString();baidu.array.each(_.childNodes,function(_){_._update();});},update:function(C){var A=this,_=A._getHrefElement(),B=A._getTextElement();baidu.extend(A,C);(_?_:B).innerHTML=A.text;},_switchToggleState:function(F,_,E,B){var D=this,A=D._getToggleElement();if(D.type=="leaf"){return false;}D.isExpand=B;if(A){A.className=D._getClass(D.isLastNode()?_:E);}if(D.getChildNodes()&&D.getChildNodes().length>0){var C=D._getSubNodesContainer();if(F=="none"){baidu.fx.collapse(C,{duration:300,onafterfinish:function(){D.getTree().dispatchEvent("toggle",{treeNode:D});}});}else{baidu.fx.expand(C,{duration:300,onafterfinish:function(){D.getTree().dispatchEvent("toggle",{treeNode:D});}});}}},expand:function(){var _=this;if(!_._isRenderChildren){_.appendData(_.children);}_._switchToggleState("block","Lminus","Tminus",true);},collapse:function(){this._switchToggleState("none","Lplus","Tplus",false);},toggle:function(){var _=this;if(_.type=="leaf"){return false;}_.isExpand?_.collapse():_.expand();},_switchFocusState:function(B,_,C){var A=this;baidu.dom[C](A._getNodeElement(),A._getClass("current"));if(A.type!="leaf"){A._getIconElement().className=A._getClass(B);A.isOpen=_;}},blur:function(){var _=this;_._switchFocusState("trunk",false,"removeClass");_.getTree().setCurrentNode(null);},focus:function(){var A=this,_=A.getTree().getCurrentNode();if(_!=null){_.blur();}A._switchFocusState("open-trunk",true,"addClass");A.getTree().setCurrentNode(A);baidu.dom.removeClass(A._getNodeElement(),A._getClass("over"));},_onMouseOver:function(_){var A=this;if(A!=A.getTree().getCurrentNode()){baidu.dom.addClass(A._getNodeElement(),A._getClass("over"));}A.dispatchEvent("draghover",{event:_});A.dispatchEvent("sorthover",{event:_});},_onMouseOut:function(){var _=this;baidu.dom.removeClass(_._getNodeElement(),_._getClass("over"));_.getTree().dispatchEvent("mouseout",{treeNode:_});},_onClick:function(_){var A=this;A.focus();A.getTree().dispatchEvent("click",{treeNode:A});},_onMouseDown:function(_){var A=this;A.dispatchEvent("dragdown",{event:_});},_onDblClick:function(_){var A=this;A.focus();A.isToggle&&A.toggle();A.getTree().dispatchEvent("dblclick",{treeNode:A,event:_});},_onContextmenu:function(_){var A=this;return A.getTree().dispatchEvent("contextmenu",{treeNode:A,event:_});},_onToggleClick:function(_){var A=this;A.isToggle&&A.toggle();A.getTree().dispatchEvent("toggle",{treeNode:A});baidu.event.stopPropagation(_);},_createBodyStringArray:function(){var C=this,A=C._stringArray,_=0,B=C.parentNode;while(B){_++;B=B.parentNode;}A.push('<dt id="',C.id,'-node" class="tangram-tree-level-'+_+" tangram-tree-node-node tangram-tree-"+C.type+'"');if(C.skin){A.push(" ",C.skin,"-node");}A.push(' onclick="',C._getCallRef()+("._onClick(event)"),'"> <span id="',C.id,'-span">',C._getImagesString(true),"</span>");C._createIconStringArray();C._createTextStringArray();A.push("</dt>");},_getImagesString:function(B){var A=this,_="";_+=A._getIdentString(B);if(A.type=="leaf"){_+=A._getTLString(B);}else{if(A.type=="trunk"){if(A.children&&A.children.length>0){_+=A._getToggleString(B);}else{_+=A._getTLString(B);}}}return _;},_getIdentString:function(B){var A=this,_="",C;_='<span   class="tangram-tree-node-blank"></span>'+_;while(A.getParentNode()&&A.getParentNode().type!="root"){A=A.getParentNode();C=(A.isLastNode(B)?"blank":"I");className="tangram-tree-node-"+C;if(A.skin){className+=" "+A.skin+"-"+C;}_='<span   class="'+className+'"></span>'+_;}return _;},_getTLString:function(A){var _=this,B=(_.isLastNode(A)?"L":"T");className="tangram-tree-node-"+B;if(_.skin){className+=" "+_.skin+"-"+B;}return'<span   class="'+className+'" ></span>';},_getToggleString:function(C){var A=this,B=A.isExpand?"minus":"plus",D=(A.isLastNode(C)?"L":"T")+B,_="tangram-tree-node-"+D;if(A.skin){_+=" "+A.skin+"-"+D;}return['<span onclick="',A._getCallRef(),'._onToggleClick(event)" class="',_,'" id="',A.id,'-toggle"></span>'].join("");},_createIconStringArray:function(){var B=this,A=(B.type=="leaf"?"leaf":"trunk"),_=B._stringArray;if(B.isOpen){A="open-trunk";}_.push('<span  class="tangram-tree-node-',A);if(B.skin){_.push(" ",B.skin,"-",A);}_.push('" style="',B.icon?"background-image:url("+B.icon+")":"",'" id="',B.id,'-icon"></span>');},_createTextStringArray:function(){var B=this,_=(B.href?B._createHrefStringArray():B.text),A=B._stringArray;A.push('<span title="',B.title||B.text,'" id="',B.id,'-text" >',_,"</span></span>");if(B.highLight==1){A.push('<i class="light-icon"></i>');}},_createHrefStringArray:function(){var A=this,_=A._stringArray;_.push('<a id="',A.id,"-link",(A.target?"target='"+A.target+"'":""),' hidefocus="on" " href="',A.href,'" >',A.text,"</a>");},_getSpanElement:function(){return baidu.g(this._getId("span"));},_getIconElement:function(){return baidu.g(this._getId("icon"));},_getTextContainer:function(){return baidu.g(this._getId("textContainer"));},_getTextElement:function(){return baidu.g(this._getId("text"));},_getToggleElement:function(){return baidu.g(this._getId("toggle"));},_getSubNodesContainer:function(){return baidu.g(this._getId("subNodeId"));},_getHrefElement:function(){return baidu.g(this._getId("link"));},_getNodeElement:function(){return baidu.g(this._getId("node"));},_getContainer:function(){return baidu.g(this.id);},hide:function(){baidu.dom.hide(this._getNodeElement());},show:function(){baidu.dom.show(this._getNodeElement());},expandAll:function(){var _=this;if(_.children){_.expand();}baidu.array.each(_.getChildNodes(),function(_){_.expandAll();});},collapseAll:function(){var _=this;if(_.getChildNodes().length>0){_.collapse();}baidu.array.each(_.getChildNodes(),function(_){_.collapseAll();});},getIndex:function(){var B=this,A=B.isRoot?[]:B.getParentNode().getChildNodes(),_=-1;for(var D=0,C=A.length;D<C;D++){if(A[D]==B){return D;}}return _;},getNext:function(){var B=this,_=B.getIndex(),A;if(B.isRoot){return B;}A=B.getParentNode().getChildNodes();return(_+1>=A.length)?B:A[_+1];},getPrevious:function(){var B=this,_=B.getIndex(),A;if(B.isRoot){return B;}A=B.getParentNode().getChildNodes();return(_-1<0)?B:A[_-1];},getFirstChild:function(){var A=this,_=A.getChildNodes();return(_.length<=0)?null:_[0];},getLastChild:function(){var A=this,_=A.getChildNodes();return _.length<=0?null:_[_.length-1];},isLastNode:function(A){var _=this;if(A){return _._isLast;}if(_.isRoot){return true;}return _.getIndex()==(_.parentNode.childNodes.length-1);}};baidu.object.extend(baidu.ui.Tree.TreeNode.prototype,baidu.lang.Class.prototype);baidu.ui.Tree.extend({uiType:"tree",tplDOM:"<div class='#{class}'>#{body}</div>",getString:function(){var _=this;return baidu.format(_.tplDOM,{"class":_.getClass(),body:_._getBodyString()});},render:function(A){var _=this;_.renderMain(A).innerHTML=_.getString();_.dispatchEvent("onload");},_getBodyString:function(){var _="",A=this;if(A.data){A._rootNode=new baidu.ui.Tree.TreeNode(A.data);A._rootNode.isRoot=true;A._rootNode.type="root";A._rootNode._level=0;A._rootNode.setTree(A);_=A._rootNode.getString();}return _;},getTreeNodes:function(){return this._treeNodes;},getRootNode:function(){return this._rootNode;},getTreeNodeById:function(_){return this.getTreeNodes()[_];},getCurrentNode:function(){return this._currentNode;},setCurrentNode:function(_){this._currentNode=_;},dispose:function(){var _=this;_.dispatchEvent("dispose");baidu.dom.remove(_.getMain());baidu.lang.Class.prototype.dispose.call(_);}});function topicImgResize(B,C){var A,_;B.style.visibility="";B.height-B.width>0?B.width=C:B.height=C;}rs.Topic=function(S,Q){var b='<div class="rs-topic">  <div class="head clearfix allTitle">    <h1></h1>    <div class="tab-div">    </div>    <div class="topic-ops">      <a title="\u6536\u8d77" hidefocus="true" href="#" class="title-folder nslog:2132"></a>    </div>  </div>',a='<div class="bd">',Z='<div class="bd mode-full">',l='<div class="menu">        <div class="tree"></div>        <div class="scroll">          <a class="up-disable" title="\u5411\u4e0a\u79fb\u52a8"></a><a class="down"  title="\u5411\u4e0b\u79fb\u52a8"></a>        </div>    </div>    <div class="menu-slide-wp"><div class="menu-slide"><a href="#" class="icon-slide" hidefocus="true"></a></div></div>    <div class="main clearfix" >      <div  class="scrollPanel"></div>      <div  class="top-mask"></div>    </div>    <div class="topic-menu-shadow "></div>  </div>  <div class="bottom-border">    <div class="mask-box" style="display:none;"><div class="mask-div"></div><div class="loading-div"></div></div>  </div>',n='<div class="menu">        <div class="tree"></div>        <div class="scroll">          <a class="up-disable" title="\u5411\u4e0a\u79fb\u52a8"></a><a class="down"  title="\u5411\u4e0b\u79fb\u52a8"></a>        </div>    </div>    <div class="menu-slide-wp"><div class="menu-slide"><a href="#" class="icon-slide  icon-slide-close" hidefocus="true"></a></div></div>    <div class="main clearfix" >      <div  class="scrollPanel"></div>      <div  class="top-mask"></div>    </div>    <div class="topic-menu-shadow"></div>  </div>  <div class="bottom-border">    <div class="mask-box" style="display:none;"><div class="mask-div"></div><div class="loading-div"></div></div>  </div>',j=b+a+Z,P=this;P.data={};baidu.object.extend(P,S);if(P.container){var c=baidu.g(P.container);if(P.data.showType==1&&P.data.topicType==1){var g=1;}else{g=0;}if(g==0){c.innerHTML=b+a+l;}else{c.innerHTML=b+Z+n;}var K=baidu.dom.query(".tree",c)[0],R=baidu.dom.query(".scroll",c)[0],N=baidu.dom.query(".scroll a",c),G=N[0],o=N[1],i=baidu.dom.query(".tab-div",c)[0],I=baidu.dom.query(".scrollPanel",c)[0],t=baidu.dom.query(".mask-box",c)[0],X=baidu.dom.query(".head h1",c)[0],E,O,V={},F=0,M,s=122;f();Q&&Q(this);}this.initScroll=T;this.initScrollPanel=H;this.changeTitle=h;this.addInfoListHover=D;function f(){if(P.data.topicId){r();return;}var _=new rs.Request("view/getFEntryTableContent");_.callback=function(_){baidu.object.extend(P.data,_.selectedTable);r();};_.args=[0,8,{fentryTableId:P.topicId,lemmaId:-1,subLemmaId:-1}];_.post();}function r(){X.innerHTML=baidu.string.encodeHTML(rs.subByte(P.data.topicTitle,24));X.title=baidu.string.encodeHTML(P.data.topicTitle);H();C();A();W();U();e();}function H(A){var _=A||I;E=new baidu.ui.ScrollPanel({container:_,element:_});E.render(_);E.setVisible(false,"x");return E;}function T(){var H=E.getScrollBar("y");if(typeof baikeViewInfo!="undefined"){var A=baidu.dom.q("point-"+P.lemmaId)[0];if(typeof A=="undefined"){return false;}var D=baikeViewInfo.id,C=P.data.topicId,F=baidu.dom.g("rs-topic-buffer-"+P.subLemmaId+"-"+C),I=baidu.dom.query(".info-list",F)[0],I=typeof I=="undefined"?baidu.dom.query(".image-type-ul",F)[0]:I,B=A&&baidu.dom.getAncestorByClass(A,"info-list-td"),B=B==null?baidu.dom.getAncestorByTag(baidu.dom.q("point-"+P.lemmaId)[0],"li"):B,G=baidu.dom.query("img",I),_=G[G.length-1];baidu.event.on(_,"onload",function(){var A=I.offsetHeight,C=baidu.dom.getPosition(I).top,G=B&&baidu.dom.getPosition(B).top,_=parseInt((G-C)/A*100)||0;H.scrollTo(_);var E=C+(F.offsetHeight/2);function D(_){var A=B&&baidu.dom.getPosition(B).top;H.scrollTo(_);if(E>A||_==100){return false;}_++;arguments.callee(_);}setTimeout(function(){D(_);},1000);});}}function B(_){_.menuId=_.id;_.id=P.subLemmaId+"-"+P.data.topicId+"-"+_.id;_.title=baidu.string.encodeHTML(_.text);_.text=baidu.string.encodeHTML(_.text.subText(6));if(_.type=="leaf"){return;}if(_.children){for(var A=0;_.children[A];A++){if(_.children[A].type=="leaf"&&(!_.children[A].typeList||_.children[A].typeList.length==0)){}else{B(_.children[A]);}}}}function k(A,C,B){A.target.getRootNode().expand();if(A.target.getTreeNodeById(P.subLemmaId+"-"+B+"-"+C)){return false;}for(var D=C;D>0;D--){var _=A.target.getTreeNodeById(P.subLemmaId+"-"+B+"-"+D);if(_!=undefined){_.expand();return arguments.callee(A,C,B);}}}function C(){B(P.data.menu);O=new baidu.ui.Tree({data:P.data.menu,expandable:false,ontoggle:p,onload:function(_){var A=P.data.topicId;if(P.data.defaultTab){var B=P.data.defaultTab.menuId;k(_,B,A);}else{_.target.getRootNode().expand();_.target.getRootNode().getFirstChild().expandAll();}}});O.render(K);O.getRootNode().hide();O.onclick=function(B){var A=B.treeNode;if(A.type=="leaf"){F=A.menuId;M=A;d();h(1);nslog(location.href,3701);}else{A.toggle();var _=O.getCurrentNode();baidu.dom.removeClass(_._getNodeElement(),_._getClass("current"));p();nslog(location.href,3700);}};rs.hover(baidu.dom.query(".tangram-tree-leaf",c),"tangram-tree-node-over");p();}function d(){if(V[F]){i.innerHTML=V[F].tabHtml;if(V[F].selId){baidu.dom.radioClass(baidu.dom.query("li[typeid="+V[F].selId+"]",i)[0],"sel");s=V[F].selId;L();}return;}if(!M.typeList||M.typeList.length==0){return;}var _=m(M.typeList);s=M.typeList[0];V[F]={tabHtml:_,selId:s};i.innerHTML=V[F].tabHtml;L();}function m(D){var A=["<ul>"];if(D.length<2){var C=' <li style="display:none" class="#{cls}" typeid="#{id}"><a title="#{title}"><b></b>#{mainTitle}</a></li>';}else{C=' <li class="#{cls}" typeid="#{id}"><a title="#{title}"><b></b>#{mainTitle}</a></li>';}for(var E=0;D[E];E++){var _=P.data.tab[D[E]].text,B={title:baidu.string.encodeHTML(_),mainTitle:baidu.string.encodeHTML(rs.subByte(_,12)),cls:(E==0)?"sel":"",id:D[E]};A.push(baidu.format(C,B));}A.push("</ul>");return A.join("");}function W(){baidu.on(i,"click",function(_){var B=baidu.event.getTarget(_),A=baidu.dom.getAncestorByTag(B,"li");if(A){baidu.dom.radioClass(A,"sel");s=V[F].selId=baidu.dom.getAttr(A,"typeid");L();nslog(location.href,3704);}});}function L(){var _=baidu.dom.query(".scrollPanel",c)[0];if(!(V[F]&&V[F][s])){baidu.show(t);P.loadingTime=setTimeout(function(){baidu.hide(t);},2000);var A=new rs.Request("view/getTopicTableContent");A.callback=function(A){if(A.error_code==0){V[F][s]={infoHtml:q(A.pageData.typeTpl,A.pageData.typeData),typeTpl:A.pageData.typeTpl,typeData:A.pageData.typeData};V[F][s].infoHtml=Y(V[F][s].infoHtml,A.pageData.typeTpl);_.innerHTML=V[F][s].infoHtml;E.update();E.getScrollBar()[0].scrollTo("0");D();}};A.args=[{topicId:P.data.topicId,menuId:F,typeId:s}];A.post();return;}V[F][s].infoHtml=Y(V[F][s].infoHtml,V[F][s].typeTpl);_.innerHTML=V[F][s].infoHtml;E.update();E.getScrollBar()[0].scrollTo("0");D();}function q(D,G){var L=D.richTemplate.picture;if(D.richTemplate.type==1){D.richTemplate.layout=L.position.indexOf("left")>-1?"left":"right";D.richTemplate.vAlign=L.position.indexOf("top")>-1?"top":"middle";}var A={};for(var I in D.attriList){A[D.attriList[I].attriIndex]=D.attriList[I].attriId;}for(var M in D.richTemplate.content){liTpl=D.richTemplate.content[M];liTpl.newExpression=liTpl.expression.replace(/#{(\d+)}/g,function(){return"#{"+A[arguments[1]]+"}";});}var E=[];for(var K=0;G[K];K++){var P=G[K],N={pic:P.pic};for(var F=0;D.attriList[F];F++){var C=D.attriList[F],B=P[C.attriId];if(B){if(baidu.lang.isArray(B)){var H=[];baidu.each(B,function(A){var B=D.richTemplate.type==2?A.text:_(C,A);H.push(baidu.string.format(C.expression,[B]));});N[C.attriId]=H.join("");}else{N[C.attriId]=D.richTemplate.type==2?B.text:_(C,B);}}}rs.apply(N,G[K][D.attriList[0].attriId]);E.push(J(D.richTemplate,N));}if(D.richTemplate.type==1){var O=['<table class="info-list nslog-area:3706"><tr>'];for(K=0;E[K];K++){if(K!=0&&K%D.richTemplate.repeat==0){O.push('</tr> <tr class="info-split"><td  colspan="'+D.richTemplate.repeat+'"></td></tr>');}O.push('<td  width="'+parseInt((100/D.richTemplate.repeat))+'%" class="info-list-td">');O.push(E[K]);O.push("</td>");}O.push("</table><br style='height:10px'>");}else{if(D.richTemplate.type==2){O=['<ul class="image-type-ul  nslog-area:3710">'];for(K=0;E[K];K++){O.push(E[K]);}O.push("</ul>");}}return O.join("");}function J(A,B){B=B||{text:"\u6d4b\u8bd5\u6570\u636e"};var C={pic:"#{pic}",lemmaId:"#{lemmaId}",subLemmaId:"#{subLemmaId}",text:"#{text}",size:A.picture.size};if(A.type==1){if((typeof baikeViewInfo!="undefined")&&B.subLemmaId==P.subLemmaId){var I=['<div class="item-wp beInLemma"><table class="info-item "><tr>'];}else{I=['<div class="item-wp"><table class="info-item"><tr>'];}var J='<td valign="#{vAlign}" width="#{size}" ><a class="point-#{lemmaId}" href="http://baike.baidu.com/view/#{lemmaId}.htm#sub#{subLemmaId}" title="#{text}" target="_blank" class="nslog:3707"><span><img class="info-img #{layout}" src="#{pic}" width="#{size}"  /></span></a></td> ',H=rs.apply({vAlign:A.vAlign,layout:A.layout},C),K=baidu.string.format(J,H),G=['<td valign="top"> <ul class="info-detail">'];for(var E in A.content){var D=A.content[E];G.push(baidu.format('<li class="#{type}  #{position}">#{newExpression}</li>',D));}G.push("</ul></td>");if(A.layout=="left"){I.push(K,G.join(""));}else{I.push(G.join(""),K);}I.push("</tr></table></div>");var L=I.join("");}else{if(A.type==2){C.layout=A.content[0].position||"center";if(B.lemmaId==0){var _=encodeURIComponent(B.text),F='" style="width:#{size}px;height:#{size}px;" class="#{layout} point-#{lemmaId}" href="http://baike.baidu.com/searchword/?word='+_+'&amp;pic=1&amp;enc=utf8" title="#{text}" target="_blank"><i class="click-fix" style="width:#{size}px;height:#{size}px;"></i><span style="width:#{size}px;height:#{size}px;line-height:#{size}px"><img  onload="topicImgResize(this,#{size})" src="#{pic}" style="visibility:hidden"/></span><p class="mask"></p><p class="title">';}else{F='" style="width:#{size}px;height:#{size}px;" class="#{layout} point-#{lemmaId}" href="http://baike.baidu.com/view/#{lemmaId}.htm#sub#{subLemmaId}" title="#{text}" target="_blank"><i class="click-fix" style="width:#{size}px;height:#{size}px;"></i><span style="width:#{size}px;height:#{size}px;line-height:#{size}px"><img  onload="topicImgResize(this,#{size})" src="#{pic}" style="visibility:hidden"/></span><p class="mask"></p><p class="title">';}if(A.repeat==8){C.size=60;}else{if(A.repeat==5){C.size=98;}}D=A.content[0];if((typeof baikeViewInfo!="undefined")&&B.lemmaId==baikeViewInfo.id){G=['<li class="beInLemma"><a title="',D.newExpression,baidu.string.format(F,C),D.newExpression,'</p><div class="over-div" style="width:'+(C.size-2)+"px;height:"+(C.size-2)+"px;margin-top:-"+(C.size)+'px;"></div></a></li>'];}else{G=['<li><a title="',D.newExpression,baidu.string.format(F,C),D.newExpression,'</p><div class="over-div" style="width:'+(C.size-2)+"px;height:"+(C.size-2)+"px;margin-top:-"+(C.size)+'px;"></div></a></li>'];}L=G.join("");}}B.text=baidu.string.encodeHTML(B.text);B.pic=B.pic&&B.pic.length>0?"http://imgsrc.baidu.com/baike/abpic/item/"+B.pic+".jpg":"/guanxi/static/image/relation-default.png";return baidu.format(L,B);}function _(G,D){var A=baidu.string.encodeHTML(D.text),_=encodeURIComponent(D.text);baidu.extend(D,{text:A,textDesc:_});var E=D,B;if(G.isLinked==1){if(D.lemmaId>0){if(D.subLemmaId>0){B=baidu.format('<a target="_blank" href="http://baike.baidu.com/view/#{lemmaId}.htm#sub#{subLemmaId}"  title="#{text}">#{text}</a>',E);}else{B=baidu.format('<a target="_blank" href="http://baike.baidu.com/view/#{lemmaId}.htm"  title="#{text}">#{text}</a>',E);}}else{if(D.attriType=="AB"){if(A.indexOf("\u3001")>-1){var F=[];for(var C in A.split("\u3001")){C=baidu.string.encodeHTML(C);F.push(baidu.format('<a target="_blank" href="http://baike.baidu.com/searchword/?word=#{itemDesc}&pic=1&sug=1&enc=utf8" title="#{item}">#{item}</a>'),{item:C,itemDesc:encodeURIComponent(C)});}}else{B=baidu.format('<a target="_blank" href="http://baike.baidu.com/searchword/?word=#{textDesc}&pic=1&sug=1&enc=utf8" class="link-inner" title="#{text}">#{text}</a>',E);}}else{E.cls=D.entryId==0?"":"relation-create-lemma-color";E.title=D.entryId==0?A:"\u5f85\u521b\u5efa";B=baidu.format('  <a target="_blank" href="http://baike.baidu.com/searchword/?word=#{textDesc}&pic=1&sug=1&enc=utf8" class="#{cls}"  title="#{title}">#{text}</a>',E);}}}else{B=A;}return B;}function Y(A,B){if(!A){return;}var _=8;if(B.richTemplate.repeat==8){_=8;}else{if(B.richTemplate.repeat==5){_=14;}}return A.replace(/<p class="title">(.*?)<\/p>/g,function(A){return['<p class="title">',rs.subByte(arguments[1],_,".."),"</p>"].join("");});}function D(){rs.hover(baidu.dom.query(".info-list-td",c),"info-list-td-over");baidu.hide(t);if(P.loadingTime){clearTimeout(P.loadingTime);}}function U(){var _=function(){var A=navigator.userAgent.toLowerCase(),_=/(webkit)/.exec(A)||/(opera)/.exec(A)||/(msie)/.exec(A)||A.indexOf("compatible")<0&&/(mozilla)/.exec(A)||[];return _[1]=="mozilla"?"DOMMouseScroll":"mousewheel";};baidu.event.on(K,_(),function(_){_=_||window.event;detail=_.detail||-_.wheelDelta;baidu.event.preventDefault(_);K.scrollTop+=detail*2;p();});}function A(){var B,_=0,A=true;baidu.on(R,"click",function(_){if(!A){A=true;return;}var D="",C=baidu.event.getTarget(_);if(baidu.dom.hasClass(C,"up")){D="up";}else{if(baidu.dom.hasClass(C,"down")){D="down";}}if(D.length>0){var B=K.scrollTop,F=100,E=B;if(D=="up"){E-=F;}else{E+=F;}baidu.fx.scrollTo(K,[B,E],{onafterfinish:p});}});baidu.on(R,"mousedown",function(A){var D="",C=baidu.event.getTarget(A);if(baidu.dom.hasClass(C,"up")){D="up";}else{if(baidu.dom.hasClass(C,"down")){D="down";}}if(D.length>0){_=(new Date()).getTime();clearInterval(B);B=setInterval(function(){if(D=="up"){K.scrollTop-=5;}else{K.scrollTop+=5;}p();},50);}});baidu.on(R,"mouseup",function(C){clearInterval(B);var D=new Date().getTime();if(D-_>500){A=false;}p();});}function p(){var _=baidu.q("tangram-tree",K)[0];if(_.offsetHeight<350){baidu.hide(R);}else{baidu.show(R);}if(K.scrollTop==0){baidu.dom.addClass(G,"up-disable");baidu.dom.removeClass(G,"up");}else{baidu.dom.removeClass(G,"up-disable");baidu.dom.addClass(G,"up");}if(K.scrollHeight==K.scrollTop+K.offsetHeight){baidu.dom.addClass(o,"down-disable");baidu.dom.removeClass(o,"down");}else{baidu.dom.removeClass(o,"down-disable");baidu.dom.addClass(o,"down");}}function e(){if(typeof P.data.defaultTab!="undefined"){var A=P.subLemmaId+"-"+P.data.topicId+"-"+P.data.defaultTab.menuId;_=O.getTreeNodeById(A);}else{var _=O.getRootNode();while(_&&_.type!="leaf"){_=_.getFirstChild();}}O.setCurrentNode(_);_.focus();M=_;F=_.menuId;s=P.data.defaultTab?P.data.defaultTab.typeId:_.typeList[0];if(P.data.typeTpl&&P.data.typeData){V[F]={selId:s,tabHtml:m(_.typeList)};V[F][s]={infoHtml:q(P.data.typeTpl,P.data.typeData),typeTpl:P.data.typeTpl,typeData:P.data.typeData};d();}}this.previewTopic=function(B){var A='<div class="rs-topic"><div class="main"></div></div>',_={};for(var E=0;B.attriList[E];E++){var D=B.attriList[E];_[D.attriId]={entryId:"60241",lemmaId:"928962",subLemmaId:928962,text:"\u6d4b\u8bd5\u6570\u636e"+D.attriIndex};}var C=[];for(E=0;E<50;E++){C.push(_);}return'<div class="rs-topic"><div class="main">'+(q(B,C))+"</div></div>";};function h(B){var A=baidu.string.encodeHTML(rs.subByte(P.data.topicTitle,24)),C=baidu.string.encodeHTML(P.data.topicTitle);if(B==1){var _=baidu.dom.g(O._currentNode.id+"-text").title;X.innerHTML=A+" \xb7 <span>"+_+"<s/pan>";X.title=C+" \xb7 "+_;}}};